from aiogram import F, Router, types
from aiogram.filters import Command
from app.keyboards import main_menu

router = Router()

@router.message(Command("help"))
async def cmd_help(message: types.Message):
    """–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É"""
    help_text = (
        "ü§ñ <b>ShadowTalk - –ü–æ–º–æ—â—å</b>\n\n"
        "üîó <b>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b>\n"
        "1. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é —Å—Å—ã–ª–∫—É –≤ 'üîó –ú–æ—è —Å—Å—ã–ª–∫–∞'\n"
        "2. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –¥—Ä—É–≥–∏–º–∏\n"
        "3. –ü–æ–ª—É—á–∞–π—Ç–µ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n"
        "4. –û—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É 'üí¨ –û—Ç–≤–µ—Ç–∏—Ç—å'\n"
        "5. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –ø–æ —á—É–∂–∏–º —Å—Å—ã–ª–∫–∞–º —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è\n\n"
        "üí¨ <b>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</b>\n"
        "‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã\n"
        "‚Ä¢ –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≤–æ—è —Å—Å—ã–ª–∫–∞\n"
        "‚Ä¢ –ú–æ–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n"
        "‚Ä¢ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç\n\n"
        "üëÅÔ∏è <b>–†–∞—Å–∫—Ä—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:</b>\n"
        "‚Ä¢ –ú–æ–∂–Ω–æ —Ä–∞—Å–∫—Ä—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ª—é–±–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è\n"
        "‚Ä¢ –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è\n"
        "‚Ä¢ –†–∞—Å–∫—Ä—ã—Ç–∏—è –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –≤ 'üí∞ –ü–ª–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏'\n\n"
        "üìù <b>–ö–æ–º–∞–Ω–¥—ã:</b>\n"
        "/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n"
        "/help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞"
    )

    await message.answer(help_text, parse_mode="HTML")

@router.message(F.text == "‚óÄÔ∏è –ù–∞–∑–∞–¥")
async def back_to_main(message: types.Message):
    """–í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    try:
        await message.answer("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:", reply_markup=main_menu())
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é: {e}")
        await message.answer("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞")
